import{u as v,r as C,j as e}from"./app-DEodmxZ4.js";import{I as m}from"./input-error-CWSVcoCe.js";import{B as c}from"./button-BU8wYODn.js";import{C as x,a as j}from"./calendar-DnC5HLJA.js";import{C as P,a as M,b as F,c as S,d as T}from"./card-DDq-eJrx.js";import{I as A}from"./input-Ma6ltSwf.js";import{L as u}from"./label-CVFwntDH.js";import{P as f,a as y,b as g}from"./popover-D4Dd06r9.js";import{c as w}from"./utils-CBfrqCZ4.js";import{f as n}from"./format-Ca1hgyLe.js";/* empty css            */import"./createLucideIcon-Ciazu9A6.js";import"./chevron-left-BAadinYi.js";import"./chevron-right-BAUhfx-k.js";import"./chevron-down-BJJsNtqP.js";import"./index-Dqm9ArZJ.js";import"./index-WzQZJAMm.js";import"./Combination-BD8NzWg0.js";function W({academicYear:s}){const d=!!s,{data:a,setData:r,post:N,put:D,processing:p,errors:l}=v({name:s?.name??"",start:s?.start?n(new Date(s.start),"yyyy-MM-dd"):"",end:s?.end?n(new Date(s.end),"yyyy-MM-dd"):""});C.useEffect(()=>{if(a.start&&a.end)try{const t=new Date(a.start).getFullYear(),i=new Date(a.end).getFullYear();if(!isNaN(t)&&!isNaN(i)){const h=`${t}/${i}`;a.name!==h&&r("name",h)}}catch{r("name","")}else r("name","")},[a.start,a.end]);function b(t){t.preventDefault(),d?D(route("protected.academic-years.update",s.id)):N(route("protected.academic-years.store"))}const o=new Date().getFullYear();return e.jsxs(P,{children:[e.jsxs(M,{children:[e.jsx(F,{children:d?"Edit Tahun Ajaran":"Tambah Tahun Ajaran Baru"}),e.jsx(S,{children:d?"Lakukan perubahan pada data tahun ajaran yang sudah ada.":"Isi formulir di bawah ini untuk menambahkan tahun ajaran baru."})]}),e.jsx(T,{children:e.jsxs("form",{onSubmit:b,className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsxs(u,{htmlFor:"name",children:["Tahun Ajaran",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx(A,{id:"name",name:"name",value:a.name,onChange:t=>r("name",t.target.value),disabled:!0,placeholder:"Akan terisi otomatis..."}),e.jsx(m,{message:l.name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"start",children:["Mulai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:w("w-full justify-start text-left font-normal",!a.start&&"text-muted-foreground"),children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),a.start?n(new Date(a.start),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(g,{className:"w-auto p-0",children:e.jsx(j,{mode:"single",captionLayout:"dropdown",fromYear:o-10,toYear:o+10,selected:a.start?new Date(a.start):void 0,onSelect:t=>{if(!t)return;const i=n(t,"yyyy-MM-dd");r("start",i),a.end&&new Date(i)>new Date(a.end)&&r("end","")},initialFocus:!0})})]}),e.jsx(m,{message:l.start})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(u,{htmlFor:"end",children:["Selesai ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs(f,{children:[e.jsx(y,{asChild:!0,children:e.jsxs(c,{variant:"outline",className:w("w-full justify-start text-left font-normal",!a.end&&"text-muted-foreground"),disabled:!a.start,children:[e.jsx(x,{className:"mr-2 h-4 w-4"}),a.end?n(new Date(a.end),"PPP"):e.jsx("span",{children:"Pilih tanggal"})]})}),e.jsx(g,{className:"w-auto p-0",children:e.jsx(j,{mode:"single",captionLayout:"dropdown",fromYear:o-10,toYear:o+10,selected:a.end?new Date(a.end):void 0,onSelect:t=>t&&r("end",n(t,"yyyy-MM-dd")),disabled:{before:a.start?new Date(a.start):new Date},defaultMonth:a.start?new Date(a.start):void 0,initialFocus:!0})})]}),e.jsx(m,{message:l.end})]}),e.jsx("div",{className:"flex justify-end md:col-span-2",children:e.jsx(c,{type:"submit",disabled:p,children:p?"Menyimpan...":d?"Simpan Perubahan":"Buat Tahun Ajaran"})})]})})]})}export{W as default};
